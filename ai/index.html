<html>
  <head>
    <meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes">
    <title>DeChat ➜ ❞AI :: MINDON</title>
  <style>
body {
  padding: 1rem;
}
.footer {
  margin: 2rem auto;
  color: #222;
  text-align: center;
  zoom: .66;
}
  </style>
</head>
  <body>
  <div style="text-align: center; color: #999;margin:1rem auto">
    跟ChatGPT-3.5聊聊天 :-p
    <div style="zoom:.6" id="myvip">需要用自己的key对应网址，微信联系 @mindon</div>
  </div>
  <qi-chat></qi-chat>
  <div class="footer">DeQi ➜ ❞AI: 麦盾出品，Powered by ChatGPT 3.5 from <a href="https://openai.com" target="_blank">OpenAI</a></div>
  <script type="module" src="qi-chat.js"></script>
  <script>
    const q = new URL(`about:blank${location.search}`).searchParams;
    const vip = q.get("vip");
    if (vip && /^\w{1,16}$/.test(vip)) {
      document.querySelector('#myvip').innerText = `${vip.toUpperCase()}`;
    }

    let _lastSpeech = '';
    window.addEventListener('beforeunload', () => {
      speechSynthesis.cancel();
    });

    document.addEventListener('speak', (evt) => {
      const text = evt.detail;
      if (_lastSpeech != text) {
      if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
      }
      speechSynthesis.speak(new SpeechSynthesisUtterance(text));
      _lastSpeech = text;
      return;
    }
    if (speechSynthesis.speaking) {
      if (speechSynthesis.paused) {
        speechSynthesis.resume();
      } else {
        speechSynthesis.pause();
      }
    } else {
      speechSynthesis.speak(new SpeechSynthesisUtterance(text));
    }
  });
  </script>
  </body>
</html>
